<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Workbook for Statistics 2</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Workbook for Statistics">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Workbook for Statistics 2" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Workbook for Statistics" />
  <meta name="github-repo" content="aupsychology" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Workbook for Statistics 2" />
  
  <meta name="twitter:description" content="Workbook for Statistics" />
  

<meta name="author" content="Robert G. Franklin Jr.">


<meta name="date" content="2017-08-02">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="free-assignment-2-using-the-tidyverse-and-graphs-with-ggplot.html">
<link rel="next" href="free-assignment-4-regression-and-multiple-regression-in-r.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Stats 2 Workbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="interactive-assignment-1-introduction-to-r.html"><a href="interactive-assignment-1-introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Interactive Assignment 1: Introduction to R</a><ul>
<li class="chapter" data-level="1.1" data-path="interactive-assignment-1-introduction-to-r.html"><a href="interactive-assignment-1-introduction-to-r.html#doing-basic-math-in-r"><i class="fa fa-check"></i><b>1.1</b> Doing basic math in R</a></li>
<li class="chapter" data-level="1.2" data-path="interactive-assignment-1-introduction-to-r.html"><a href="interactive-assignment-1-introduction-to-r.html#objects"><i class="fa fa-check"></i><b>1.2</b> Objects</a></li>
<li class="chapter" data-level="1.3" data-path="interactive-assignment-1-introduction-to-r.html"><a href="interactive-assignment-1-introduction-to-r.html#creating-data-frames"><i class="fa fa-check"></i><b>1.3</b> Creating data frames</a></li>
<li class="chapter" data-level="1.4" data-path="interactive-assignment-1-introduction-to-r.html"><a href="interactive-assignment-1-introduction-to-r.html#part-2-inputting-data-from-other-sources."><i class="fa fa-check"></i><b>1.4</b> Part 2: inputting data from other sources.</a></li>
<li class="chapter" data-level="1.5" data-path="interactive-assignment-1-introduction-to-r.html"><a href="interactive-assignment-1-introduction-to-r.html#terms-and-concepts-to-know"><i class="fa fa-check"></i><b>1.5</b> Terms and concepts to know:</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="interactive-assignment-2-reviewing-inferential-statistics.html"><a href="interactive-assignment-2-reviewing-inferential-statistics.html"><i class="fa fa-check"></i><b>2</b> Interactive Assignment 2: Reviewing Inferential Statistics</a><ul>
<li class="chapter" data-level="2.1" data-path="interactive-assignment-2-reviewing-inferential-statistics.html"><a href="interactive-assignment-2-reviewing-inferential-statistics.html#part-1-summary-statistics"><i class="fa fa-check"></i><b>2.1</b> Part 1: Summary Statistics</a><ul>
<li class="chapter" data-level="2.1.1" data-path="interactive-assignment-2-reviewing-inferential-statistics.html"><a href="interactive-assignment-2-reviewing-inferential-statistics.html#examining-gender-differences-using-t-tests"><i class="fa fa-check"></i><b>2.1.1</b> Examining Gender Differences Using T-tests</a></li>
<li class="chapter" data-level="2.1.2" data-path="interactive-assignment-2-reviewing-inferential-statistics.html"><a href="interactive-assignment-2-reviewing-inferential-statistics.html#correlation-with-r"><i class="fa fa-check"></i><b>2.1.2</b> Correlation with R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="free-assignment-1-reviewing-r.html"><a href="free-assignment-1-reviewing-r.html"><i class="fa fa-check"></i><b>3</b> Free Assignment 1: Reviewing R</a><ul>
<li class="chapter" data-level="3.1" data-path="free-assignment-1-reviewing-r.html"><a href="free-assignment-1-reviewing-r.html#basic-descriptive-statistics"><i class="fa fa-check"></i><b>3.1</b> Basic descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="interactive-assignment-3-the-tidyverse.html"><a href="interactive-assignment-3-the-tidyverse.html"><i class="fa fa-check"></i><b>4</b> Interactive Assignment 3: The tidyverse</a></li>
<li class="chapter" data-level="5" data-path="interactive-assignment-4-graphs-with-ggplot.html"><a href="interactive-assignment-4-graphs-with-ggplot.html"><i class="fa fa-check"></i><b>5</b> Interactive Assignment 4: Graphs with ggplot</a><ul>
<li class="chapter" data-level="5.1" data-path="interactive-assignment-4-graphs-with-ggplot.html"><a href="interactive-assignment-4-graphs-with-ggplot.html#using-ggplot-to-create-histograms"><i class="fa fa-check"></i><b>5.1</b> Using ggplot to create histograms</a><ul>
<li class="chapter" data-level="5.1.1" data-path="interactive-assignment-4-graphs-with-ggplot.html"><a href="interactive-assignment-4-graphs-with-ggplot.html#creating-scatterplots-using-ggplot"><i class="fa fa-check"></i><b>5.1.1</b> Creating scatterplots using ggplot</a></li>
<li class="chapter" data-level="5.1.2" data-path="interactive-assignment-4-graphs-with-ggplot.html"><a href="interactive-assignment-4-graphs-with-ggplot.html#editing-other-plot-elements"><i class="fa fa-check"></i><b>5.1.2</b> Editing other plot elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="free-assignment-2-using-the-tidyverse-and-graphs-with-ggplot.html"><a href="free-assignment-2-using-the-tidyverse-and-graphs-with-ggplot.html"><i class="fa fa-check"></i><b>6</b> Free Assignment 2: Using the Tidyverse and graphs with ggplot</a></li>
<li class="chapter" data-level="7" data-path="interactive-assignment-5-regression-in-r.html"><a href="interactive-assignment-5-regression-in-r.html"><i class="fa fa-check"></i><b>7</b> Interactive Assignment 5 - Regression in R</a><ul>
<li class="chapter" data-level="7.1" data-path="interactive-assignment-5-regression-in-r.html"><a href="interactive-assignment-5-regression-in-r.html#simple-regression"><i class="fa fa-check"></i><b>7.1</b> Simple Regression</a></li>
<li class="chapter" data-level="7.2" data-path="interactive-assignment-5-regression-in-r.html"><a href="interactive-assignment-5-regression-in-r.html#adding-a-control-variable-multiple-regression"><i class="fa fa-check"></i><b>7.2</b> Adding a control variable: Multiple Regression</a></li>
<li class="chapter" data-level="7.3" data-path="interactive-assignment-5-regression-in-r.html"><a href="interactive-assignment-5-regression-in-r.html#plotting-a-regression-line-using-ggplot"><i class="fa fa-check"></i><b>7.3</b> Plotting a regression line using ggplot</a></li>
<li class="chapter" data-level="7.4" data-path="interactive-assignment-5-regression-in-r.html"><a href="interactive-assignment-5-regression-in-r.html#summary"><i class="fa fa-check"></i><b>7.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="free-assignment-4-regression-and-multiple-regression-in-r.html"><a href="free-assignment-4-regression-and-multiple-regression-in-r.html"><i class="fa fa-check"></i><b>8</b> Free Assignment 4 - Regression and multiple regression in R</a></li>
<li class="chapter" data-level="9" data-path="free-assignment-5-regression-and-sports.html"><a href="free-assignment-5-regression-and-sports.html"><i class="fa fa-check"></i><b>9</b> Free Assignment 5: Regression and Sports</a></li>
<li class="chapter" data-level="10" data-path="interactive-assignment-7-moderation-in-multiple-regression.html"><a href="interactive-assignment-7-moderation-in-multiple-regression.html"><i class="fa fa-check"></i><b>10</b> Interactive Assignment 7: Moderation in Multiple Regression</a><ul>
<li class="chapter" data-level="10.1" data-path="interactive-assignment-7-moderation-in-multiple-regression.html"><a href="interactive-assignment-7-moderation-in-multiple-regression.html#using-moderation-in-regression"><i class="fa fa-check"></i><b>10.1</b> Using moderation in regression</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="free-assignment-6-moderation-with-r.html"><a href="free-assignment-6-moderation-with-r.html"><i class="fa fa-check"></i><b>11</b> Free Assignment 6: Moderation with R</a></li>
<li class="chapter" data-level="12" data-path="interactive-assignment-8-between-subject-anova.html"><a href="interactive-assignment-8-between-subject-anova.html"><i class="fa fa-check"></i><b>12</b> Interactive Assignment 8: Between-subject ANOVA</a></li>
<li class="chapter" data-level="13" data-path="free-assignment-7-between-subject-anova.html"><a href="free-assignment-7-between-subject-anova.html"><i class="fa fa-check"></i><b>13</b> Free Assignment 7: Between-subject ANOVA</a></li>
<li class="chapter" data-level="14" data-path="interactive-assignment-9-within-subject-anova.html"><a href="interactive-assignment-9-within-subject-anova.html"><i class="fa fa-check"></i><b>14</b> Interactive Assignment 9: Within-subject ANOVA</a><ul>
<li class="chapter" data-level="14.1" data-path="interactive-assignment-9-within-subject-anova.html"><a href="interactive-assignment-9-within-subject-anova.html#graphing-with-error-bars"><i class="fa fa-check"></i><b>14.1</b> Graphing with error bars</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="free-assignment-8-within-subject-anova.html"><a href="free-assignment-8-within-subject-anova.html"><i class="fa fa-check"></i><b>15</b> Free Assignment 8: Within-subject ANOVA</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Workbook for Statistics 2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-assignment-5---regression-in-r" class="section level1">
<h1><span class="header-section-number">7</span> Interactive Assignment 5 - Regression in R</h1>
<p>This lab will examine how to do regression in R. In this case, we will look at how to enter a basic linear regresison in R, how to interpret the output, and how to add other control variables.</p>
<p>The data for this assignment are a set of data examining how various factors predict a person’s wage.</p>
<p>These data are from 1985, from the <a href="www.economicswebinstitute.org/data/wagesmicrodata.xls">Economics Web Institute</a> surveying people on various attributes including how much they make. Many researchers have found convincing evidence that women make less money than men do. However, it is much more controversial why this is the case. It could be that men are more likely than women to work higher-paying jobs. It could be that men are more likely to have other factors which increase pay, such as higher education or experience. It could be that men are paid more due to discrimination.</p>
<p>In this dataset, we are going to explore how regression can help us answer the question.</p>
<p>The variables are as follows:</p>
<p>ID: person ID WAGE: wage (dollars per hour) OCCUPATION: occupation(1=Management, 2=Sales, 3=Clerical , 4=Service, 5=Professional, 6=Other) SECTOR: sector of employment(0= other, 1=Manufacturing, 2=Construction) UNION: Union membership (1=yes, 0=no) EDUCATION: Years of education (12 = high school diploma, 16= completed college, etc.) EXPERIENCE: Years of work experience AGE: Age in years SEX: Sex (0 – male, 1 – female) MARR: Married (0 – no, 1 – yes) RACE: Race (0 – other, 1 – white, 2 – Hispanic) SOUTH:Southern region (1 – yes, 0 – no)</p>
<p>The dataset is saved as the file “IA5WageData.csv”. Download this file into a folder on your computer named “IA5” and then open up a new R Script. This will contain the commands you enter in while you analyze these data. Save this script in the same folder as your csv file and then change your working directory to this folder by going to Session -&gt; Set Working Directory. When you are done with this assignment, you need to send me this script as part of the assignment.</p>
<p><strong>Step 1</strong>: Load this file into your R workspace as the data frame “income”. The first line of your script should look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">income =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;IA5WageData.csv&quot;</span>)</code></pre></div>
<p>Also, load the ggplot package because we will use it later in the lab:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre></div>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.3.2</code></pre>
<p>Make sure that the file read into R correctly. If you type <code>View(income)</code> you should get a data frame with 533 observations of 12 variables. The variables are the same ones listed above.</p>
<p>The first thing we want to do is to make a histogram of our dependent variable. Since we are intereseted in money, WAGE is the dependent variable. <strong>Step 2</strong>: Make a histogram of WAGE, using the ggplot code we leanred about in Interactive Assignment 4.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> income) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x =</span> WAGE), <span class="dt">bins =</span> <span class="dv">15</span>, <span class="dt">color =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">fill =</span> <span class="st">&#39;gray&#39;</span>) </code></pre></div>
<p><img src="07-IA5_regression_multipleregression_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<ol style="list-style-type: decimal">
<li>Does WAGE look normally distributed? Why do you think that it has the type of shape that it has? (Even if it’s not, we are going to go ahead and continue with the lab as if it is).</li>
</ol>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<div id="simple-regression" class="section level2">
<h2><span class="header-section-number">7.1</span> Simple Regression</h2>
<p>Now let’s look at a simple regression. We want to see how education predicts wages. To summarize, what we are doing here is creating a regression object in R, named x. This object contains all the regression information. Then we want a basic summary of this object, so we type the summary(x) command. This will give us the regression output.</p>
<p>Type in the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">lm</span>(WAGE~EDUCATION, <span class="dt">data =</span> income)
<span class="kw">summary</span>(x)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = WAGE ~ EDUCATION, data = income)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -7.8183 -3.2039 -0.7039  2.3050 16.3139 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -0.68919    0.99244  -0.694    0.488    
## EDUCATION    0.74109    0.07475   9.914   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4.513 on 531 degrees of freedom
## Multiple R-squared:  0.1562, Adjusted R-squared:  0.1546 
## F-statistic: 98.29 on 1 and 531 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Once you type the <code>summary(x)</code> part, you will see the regression output. The regression output has a lot of sections.</p>
<p>A. Residuals. This is a summary of the residuals of the regression. Residuals are the error in the regression equation, or how far the line of best fit is from the actual data. This gives you the quartiles for residuals, or the minimum, first quartile, median, third quartile, and maximum.</p>
<p>B. Coefficients: these tell us the regression equation for the intercept and the predictor variable. They have four columns. The first column, titled Estimate, gives us the values for the intercept (which would be alpha or a in our equation) and the b coefficient for each predictor. Remember, a linear regression equation is as follows:</p>
<p><span class="math display">\[y = a + bx\]</span></p>
<p>So in this case, the regression equation would be:</p>
<p><span class="math display">\[y = -.69 + .74x\]</span></p>
<p>The b coefficient is important because it tells us how much we would expect <span class="math inline">\(y\)</span> to increase if <span class="math inline">\(x\)</span> increases by 1. For each additional year of education, a person would expect to make an additional 74 cents (in 1985 dollars).</p>
<p>The last two columns in the Coefficient section tell us whether the predictors are significant by giving a t-value and a p-value. The first row tells us whether the intercept is significantly different from zero. Since the p-value is &gt; .05, this is not significant. However, the second row tells us whether the b coefficient for education is significantly different from zero. If it is, then that indicates that education is a significant predictor of wages. Given that the t-value is very high and the p-value is very, very low, we can conclude that education is a significant predictor of wages.</p>
<p>We will talk about the other parts of the output in a moment.</p>
<p><strong>Step 3</strong>: Now run a regression with SEX as a predictor of WAGE. You should get an output like this:</p>
<pre><code>## 
## Call:
## lm(formula = WAGE ~ SEX, data = income)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -8.995 -3.495 -1.059  2.475 17.251 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   9.9949     0.2812  35.541  &lt; 2e-16 ***
## SEX          -2.2661     0.4156  -5.452 7.63e-08 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4.781 on 531 degrees of freedom
## Multiple R-squared:  0.05301,    Adjusted R-squared:  0.05123 
## F-statistic: 29.73 on 1 and 531 DF,  p-value: 7.633e-08</code></pre>
<p>In this case, SEX is a dichotomous variable, with only two options: 0 for male and 1 for female. Even though this is the case, we can still do a regression and create a regression equation.</p>
<ol start="2" style="list-style-type: decimal">
<li>Write the regression equation you get for this regression. After you write it, solve the equation letting x = 0. This gives us the income that we would predict if a person is a male. Then solve the equation letting x = 1. This gives us the income we would predict if a person is a female. What are the answers you get?</li>
</ol>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<ol start="3" style="list-style-type: decimal">
<li>Do these results suggest that we have a wage gap in earnings?</li>
</ol>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Now we are going to do a little bit of a detour. If you remember, one way we compare whether two groups are different is by doing a t-test.</p>
<p><strong>Step 4</strong> Do a t-test comparing whether there is a significant difference in WAGE comparing women versus men, using SEX as the grouping variable.</p>
<ol start="4" style="list-style-type: decimal">
<li>How does the t-test compare to the results for the regression, comparing the t-value and p-value you get for the SEX variable in the regression to the t-value and the p-value you get for the t-test? Also how does the mean for group 0 and group 1 compare to the answers you have in Question 2, when you computed the expected income for men and for women?</li>
</ol>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
</div>
<div id="adding-a-control-variable-multiple-regression" class="section level2">
<h2><span class="header-section-number">7.2</span> Adding a control variable: Multiple Regression</h2>
<p>One of the reasons that regression is more powerful than t-tests is the ability to use a control variable. We can use more than one predictor variable to predict our outcome variable. In this case, we can see whether the effects of the independent variable on the dependent variable are still true, even controlling for another variable.</p>
<p>This is an extension of regression called multiple regression. Instead of having one predictor like <span class="math inline">\(y = a + bx\)</span>, we can extend our equation with multiple <span class="math inline">\(b\)</span> coefficients:</p>
<p><span class="math display">\[y = a + b_1 x_1 + b_2 x_2 ... b_n x_n\]</span></p>
<p>Each <span class="math inline">\(b\)</span> coefficient represents a different variable we use as a predictor.</p>
<p>Control variables are very important because we often want to make sure a relationship between a predictor and outcome variable is not due to a third variable. For instance, the relationship between violent media such as televsion and video games and how violently a child behaves may be due to other variables, such as parenting styles or socioeconomic status. We may want to control for those variables so we can say that watching violent television predicts violent behavior, even when you control for parental neglect.</p>
<p>In the wage study, onne reason that men may make more money than women is that men may be more experienced. There are several reasons why men may be more experienced than women. One notable reason is that women are much more likely than men to leave work to raise children. If a woman takes off 3-5 years in order to raise children, then she would be missing out on that level of experience. If this effect is big enough, women on average would have less experience than men have, and since experience is clearly a predictor of income, this could explain the wage gap.</p>
<p>If this is the case, then controlling for experience would make the relationship between SEX and WAGE smaller. We can do that by adding this variable to our regression. Adding multiple predictor or independent variables to a regression in R is easy: we list each of the variables and separate them with a plus sign.</p>
<p><strong>Step 5</strong>: Type the following code to do the multiple regression.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">lm</span>(WAGE~SEX+EXPERIENCE, <span class="dt">data =</span> income)
<span class="kw">summary</span>(x)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = WAGE ~ SEX + EXPERIENCE, data = income)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -9.3542 -3.5117 -0.9593  2.5514 17.9614 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  9.12849    0.39737  22.972  &lt; 2e-16 ***
## SEX         -2.36524    0.41367  -5.718  1.8e-08 ***
## EXPERIENCE   0.05107    0.01668   3.062  0.00231 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4.743 on 530 degrees of freedom
## Multiple R-squared:  0.06948,    Adjusted R-squared:  0.06597 
## F-statistic: 19.79 on 2 and 530 DF,  p-value: 5.158e-09</code></pre>
<p>When we look at this, we can see that there are now two variables listed below the intercept in Coefficients. The first is SEX and the second is EXPERIENCE. When doing multiple regression, we are creating an equation like this:</p>
<p><span class="math display">\[y = a + b_\text{sex} x_\text{sex} + b_\text{experience} x_\text{experience}\]</span></p>
<p>So when we input the values for <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>, we get:</p>
<p><span class="math display">\[y = 9.12 -2.36 x_\text{sex} + .051 x_\text{experience}\]</span></p>
<p>Based on this equation, we could predict the expected income given a person’s sex and experience.</p>
<ol start="5" style="list-style-type: decimal">
<li>Using this equation, what would you predict a person to make if he was a male with 9 years experience? What about a female with 12 years experience?</li>
</ol>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>The important thing we may be interested in is comparing the equation where sex was the only predictor to the equation where SEX and EXPERIENCE are both predictors. If EXPERIENCE explains some of the wage gap, then SEX should be a weaker predictor when EXPERIENCE is included. When we compare the b coefficients, we find that the b coefficient for SEX is almost the same in both cases, which indicates that EXPERIENCE is probably not a good explanation for the sex difference in wages.</p>
<p>In larger studies which have investigated the wage gap, the effect of experience does have a small impact in why women get paid less than men, but the effect does not explain the wage gap, just like in this dataset.</p>
<p><strong>Step 6</strong>: Try another possible control variable which might explain the relationship between SEX and WAGE instead of EXPERIENCE. Good options may include EDUCATION, AGE, or MARRIED.</p>
<ol start="6" style="list-style-type: decimal">
<li>Write your regression equation below and examine whether the b coefficients for SEX are different when SEX is the only predictor and when SEX is added with the othe predictor.</li>
</ol>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
</div>
<div id="plotting-a-regression-line-using-ggplot" class="section level2">
<h2><span class="header-section-number">7.3</span> Plotting a regression line using ggplot</h2>
<p>In a previous lab, we discussed creating a scatterplot. We can use ggplot to add a regression line to a scatterplot as well.</p>
<p>Here, we are going to create a scatterplot looking at the relationship between EDUCATION and WAGE.</p>
<p><strong>Step 7</strong>: To create a scatterplot, type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> income) +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> EDUCATION, <span class="dt">y =</span> WAGE))</code></pre></div>
<p><img src="07-IA5_regression_multipleregression_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Now, we can add a regression line by adding the command <code>geom_smooth</code>. This adds a line that fits the data. By default, ggplot uses a line that has curves in it, but we are interested in using a linear regression so we will have to use a different setting.</p>
<p><strong>Step 8</strong>: Type the following to add a line of best fit to the plot. Remember, to add things to a plot, we can just add them by using the plus symbol.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> income) +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> EDUCATION, <span class="dt">y =</span> WAGE)) +
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">x =</span> EDUCATION, <span class="dt">y =</span> WAGE), <span class="dt">method=</span><span class="st">&#39;lm&#39;</span>, <span class="dt">se=</span>F)</code></pre></div>
<p><img src="07-IA5_regression_multipleregression_files/figure-html/unnamed-chunk-8-1.png" width="672" /> This gives us the following plot. Now I’ll break down what is in the <code>geom_smooth</code> command. The first part of it tells us which data are being plotted, using the <code>aes()</code> command. This is just like in the <code>geom_point()</code> command. The second part is the <code>method()</code> part. Since we are using linear regression, we type ‘lm’ in quotes. The last part tells us to turn off standard error. By default, ggplot gives a standard error with the regression line. In this case, I want to turn it off just to give you the simple line.</p>
<p>Note that we can change how the line looks by using the same concepts we use to edit histograms and scatterplots. We could add the options <code>color()</code> or <code>size()</code> in order to change how big the line is and what color it is.</p>
<p><strong>Step 9</strong>: Edit the code below to see how EXPERIENCE predicts WAGE. Make sure you include the code in the script you are writing.</p>
</div>
<div id="summary" class="section level2">
<h2><span class="header-section-number">7.4</span> Summary</h2>
<p>This lab covered a lot about regression. After completing it, you should feel like you understand the following concepts, which are covered in Statistics I:</p>
<ol style="list-style-type: decimal">
<li>What is regression and what is it used for? Also, you should know what the predictor and outcome variables are.</li>
<li>What is the idea of a control variable and why we would use it.</li>
<li>How to interpret regressions, by creating a regression line and using that equation to predict a value for the outcome variable, given the equation.</li>
</ol>
<p>You should also start getting familiar with the following ideas:</p>
<ol style="list-style-type: decimal">
<li>How to do a simple linear regression in R as well as a multiple regression. This includes entering the commands and interpreting the output correctly.</li>
<li>Know how to compare regressions before and after adding a control variable in order to examine whether a control variable can account for a relationship.</li>
<li>Understand how to use ggplot to add a regression line (line of best fit) to a scatterplot</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="free-assignment-2-using-the-tidyverse-and-graphs-with-ggplot.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="free-assignment-4-regression-and-multiple-regression-in-r.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
